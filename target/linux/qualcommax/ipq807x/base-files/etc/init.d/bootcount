#!/bin/sh /etc/rc.common

START=99

ax880_reset_bootcount(){
cat <<EOF>/tmp/env_tmp
owrt_bc0 1
owrt_bc1 0
owrt_bc2 0
owrt_bc3 0
owrt_bc4 0
EOF
fw_setenv --script /tmp/env_tmp
}

boot() {
	case $(board_name) in
	edgecore,eap102)
		fw_setenv upgrade_available 0
		# Unset changed flag after sysupgrade complete
		fw_setenv changed
	;;
	linksys,mx4200v1|\
	linksys,mx4200v2|\
	linksys,mx4300|\
	linksys,mx5300|\
	linksys,mx8500)
		mtd resetbc s_env || true
	;;
	netgear,wax620|\
	netgear,wax630)
		fw_setenv boot_count 0
	;;
	fplus,wf-ap-624h-iic|\
	yuncore,ax880)
		ax880_reset_bootcount;
	;;
	esac
}
